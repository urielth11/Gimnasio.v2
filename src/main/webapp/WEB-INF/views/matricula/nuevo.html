<!DOCTYPE>
<html xmlns:th="http://www.thymeleaf.org">

<head th:insert="layout/menu :: head"></head>

<body class=" layout-fixed">
	<!-- BODY -->
	<div class="wrapper">
		<!-- WRAPPER -->
		<nav class="main-header navbar ">
			<!-- NAVBAR -->
			<!-- Left navbar links -->
			<ul class="navbar-nav">
				<li class="nav-item">
					<a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
				</li>
			</ul>
		</nav>

		<aside th:insert="layout/menu :: aside"></aside>
		<!-- MENU ASIDE -->

		<div class="content-wrapper">
			<!-- CONTENIDO DE LA PAGINA -->
			<div class="container-table-index py-4">
				<!-- PY4 ES MARGIN TOP -->
				<div class="card bg-light">
					<div class="card-header">
						<!-- Head-->
						<h5 th:text="${titulo}"></h5>
					</div>
					<div class="card-body">
						<!-- body-->
						<div class="row">
							<div class="col-lg-6">
								<a class="btn btn-primary btn-nuevo" data-toggle="modal"
									data-target="#myModal">Nuevo Socio</a> <br><br>
								<div class="table-responsive">
									<form method="POST" id="idRegistra" th:object="${matricula}"
										th:action="@{/matricula/grabar}">
										<input type="hidden" th:field="*{codMatricula}" id="codMatricula">
										<div class="container">
											<div class="row">
												<div class="form-group has-feedback col-md-12">
													<label for="exampleInputEmail1"><b>Dni Socio</b></label><br>
													<input readonly="true" type="text" class="form-control"
														id="socio_Nro_Dni" th:field="*{socio.socio_Nro_Dni}"
														placeholder="Seleccione Socio">
												</div>
												<div class="form-group has-feedback col-md-12">
													<label for="exampleInputEmail1"><b>Apellidos</b></label><br>
													<input readonly="true" type="text" class="form-control"
														id="apellidos" th:field="*{socio.persona.apellidos}"
														placeholder="Seleccione Socio">
												</div>
												<div class="form-group has-feedback col-md-12">
													<label for="exampleInputEmail1"><b>Nombre</b></label><br>
													<input readonly="true" type="text" class="form-control" id="nombres"
														th:field="*{socio.persona.nombres}"
														placeholder="Seleccione Socio">
												</div>
												<div class="form-group has-feedback col-md-6">
													<label for="exampleInputEmail1"><b>Tarifa</b></label><br>
													<select class="form-control" th:field="*{fichatarifa.idTarifa}"
														id="idTarifa">
														<option value="0">[Seleccione Tarifa]</option>
														<option th:each="tarS:${tarifas}" th:value="${tarS.idTarifa}"
															th:text="${tarS.tiempo + ' - ' + tarS.precio}">
														</option>
													</select>
												</div>
												<div class="form-group has-feedback col-md-12">
													<label for="exampleInputEmail1"><b>Fecha Ingreso</b></label><br>
													<input readonly="true" type="text" class="form-control"
														id="fechaInicio" th:field="*{fechaInicio}">
												</div>
											</div>
										</div>
										<div class="col-md-12 text-center mt-4">
											<button type="submit" id="Guardar" class="btn btn-primary">
												<i class="fas fa-save"></i> Registrar
											</button>
										</div>
									</form>
								</div>
							</div>
							<div class="col-lg-6">
								<div class="table-responsive">
									<table class="table table-striped table-bordered display" id="example">
										<thead class="thead-inverse">
											<tr>
												<th>DNI Socio</th>
												<th>Apellidos</th>
												<th>Nombre</th>
												<th></th>
											</tr>
										</thead>
										<tbody>
											<tr th:each="soc : ${socios}">
												<td th:text="${soc.socio_Nro_Dni}"></td>
												<td th:text="${soc.persona.apellidos}"></td>
												<td th:text="${soc.persona.nombres}"></td>
												<td>
													<button class="btn btn-primary dropdown-toggle"
														data-toggle="dropdown">
														<span class="iconify" data-icon="ion-ios-cog"></span>
													</button>
													<div class="dropdown-menu">
														<a class="dropdown-item btn-seleccionar"
															th:href="@{'/matricula/buscarSocio/' + ${soc.socio_Nro_Dni}}"
															th:text="Seleccionar">
														</a>
													</div>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- /CONTENIDO DE LA PAGINA -->
	</div>
	<!-- /WRAPPER -->

	<!-- MODAL -->
	<div class="modal fade bd-example-modal-lg" id="myModal" role="dialog">
		<!-- Modal -->
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<!-- Modal content-->
				<div class="modal-header">
					<h4 class="modal-title" th:text="${titulo}"></h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body">
					<form method="POST" id="idRegistraSocio" th:object="${socio}" th:action="@{/matricula/grabarSocio}">
						<div class="container">
							<div class="row">
								<div class="form-group has-feedback col-md-12">
									<label for="exampleInputEmail1"><b>Dni Socio</b></label><br>
									<input type="text" class="form-control" id="socio_Nro_DniS"
										th:field="*{socio_Nro_Dni}" placeholder="Ingrese DNI">
								</div>
								<div class="form-group has-feedback col-md-12">
									<label for="exampleInputEmail1"><b>Apellidos</b></label><br>
									<input type="text" class="form-control" id="apellidosS"
										th:field="*{persona.apellidos}" placeholder="Ingrese Apellidos">
								</div>
								<div class="form-group has-feedback col-md-12">
									<label for="exampleInputEmail1"><b>Nombre</b></label><br>
									<input type="text" class="form-control" id="nombresS" th:field="*{persona.nombres}"
										placeholder="Ingrese Nmbres">
								</div>
								<div class="form-group has-feedback col-md-12">
									<label for="exampleInputEmail1"><b>Fecha Nacimiento</b></label><br>
									<input type="text" class="form-control" id="fechaNacS"
										th:field="*{persona.fechaNac}" placeholder="YYYY-MM-DD">
								</div>
								<div class="form-group has-feedback col-md-12">
									<label for="exampleInputEmail1"><b>Email</b></label><br>
									<input type="text" class="form-control" id="emailS" th:field="*{persona.email}"
										placeholder="Ingrese email">
								</div>
								<div class="form-group has-feedback col-md-12">
									<label for="exampleInputEmail1"><b>Telefono</b></label><br>
									<input type="text" class="form-control" id="telefonoS" th:field="*{persona.telefono}"
										placeholder="Ingrese telefono">
								</div>
								<div class="form-group has-feedback col-md-6">
									<label for="exampleInputEmail1"><b>Tarifa</b></label><br>
									<select class="form-control" th:field="*{persona.genero}" id="generoS">
										<option value="0">[Seleccione género]</option>
										<option value="F">Femenino</option>
										<option value="M">Masculino</option>
									</select>
								</div>
							</div>
						</div>
						<div class="col-md-12 text-center mt-4">
							<button type="submit" id="Guardar" class="btn btn-primary">
								<i class="fas fa-save"></i> Registrar
							</button>
							<button type="button" id="btn-cerrar" class="btn btn-danger" data-dismiss="modal">
								<i class="fas fa-undo-alt"></i>Cancelar
							</button>
						</div>
					</form>

				</div>
			</div>
		</div>
	</div>
	<!-- MODAL -->

	<!-- FOOTER -->
	<footer th:replace="layout/menu :: footer"> </footer>

	<!--  SCRIPTS _(JS,AJAX,JQUERY,ETC) -->
	<div th:insert="layout/menu :: scripts"></div>
	<!--  <div th:insert="layout/layout :: scripts"></div>-->

	<script th:inline="javascript" th:if="${MENSAJE!=null}">
		//obtener atributo MENSAJE
		var mensaje =/*[[${MENSAJE}]]*/ null;
		toastr.success(mensaje, toastr.options = {
			"timeOut": "2000",
			"positionClass ": " toast-top-right ",
		});
	</script>
	<script>
		//asignar evento click al boton con clase "btn-editar"
		$(document).on("click", ".btn-seleccionar", function (e) {
			event.preventDefault();//indicar por defecto la acci�n principal del bot�n(etiqueta a) y anular el atributo href
			var url = $(this).attr("href");
			$.get(url, function (response) {
				console.log(response);
				$("#socio_Nro_Dni").val(response.socio_Nro_Dni);
				$("#apellidos").val(response.persona.apellidos);
				$("#nombres").val(response.persona.nombres);
			})
		})
		//asignar evento click al boton con clase "btn-nuevo"
		$(document).on("click", ".btn-nuevo", function (e) {
			$("#codUsu").val("");
			$("#logUsu").val("");
			$("#pasUsu").val("");
			$("#nro_Dni").val(0);
			$("#idRol").val(0);
			$("#estUsu").val(1);
		})
		//asignar evento click al bot�n con clase "btn-eliminar"
		$(document).on("click", ".btn-eliminar", function (e) {
			event.preventDefault();//indicar por defecto la acci�n principal del bot�n(etiqueta a) y anular el atributo href
			var url = $(this).attr("href");
			alertify.confirm("SISTEMA", "Seguro de cambiar el estado!",
				function () {//si
					window.location = url;
				},
				function () {//no 
					alertify.error('Cancelado!')
				}).
				set('labels', { ok: 'Si', cancel: 'No' });
		})
	</script>

</body>

</html>